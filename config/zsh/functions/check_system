#!/usr/bin/env zsh
# ì‹œìŠ¤í…œ ì „ì²´ ì •ë³´ í™•ì¸ í•¨ìˆ˜

function check_system() {
    echo "ğŸ–¥ï¸  ì‹œìŠ¤í…œ ì „ì²´ ì •ë³´"
    echo "======================"
    echo ""
    
    # í•¨ìˆ˜ë“¤ì˜ ê²½ë¡œ ì„¤ì •
    local functions_dir="${0:A:h}"
    
    # ê° í•¨ìˆ˜ ì‹¤í–‰
    if [[ -f "${functions_dir}/check_os" ]]; then
        source "${functions_dir}/check_os"
        check_os
    fi
    
    if [[ -f "${functions_dir}/check_cpu" ]]; then
        source "${functions_dir}/check_cpu"
        check_cpu
    fi
    
    if [[ -f "${functions_dir}/check_ram" ]]; then
        source "${functions_dir}/check_ram" 
        check_ram
    fi
    
    if [[ -f "${functions_dir}/check_disk" ]]; then
        source "${functions_dir}/check_disk"
        check_disk
    fi
    
    if [[ -f "${functions_dir}/check_gpu" ]]; then
        source "${functions_dir}/check_gpu"
        check_gpu
    fi
    
    echo "âœ… ì‹œìŠ¤í…œ ì •ë³´ í™•ì¸ ì™„ë£Œ!"
}

# ì¸ìì— ë”°ë¥¸ ê°œë³„ í•¨ìˆ˜ ì‹¤í–‰
function sysinfo() {
    local functions_dir="${0:A:h}"
    
    case "$1" in
        "os"|"OS")
            if [[ -f "${functions_dir}/check_os" ]]; then
                source "${functions_dir}/check_os" && check_os
            fi
            ;;
        "cpu"|"CPU")
            if [[ -f "${functions_dir}/check_cpu" ]]; then
                source "${functions_dir}/check_cpu" && check_cpu
            fi
            ;;
        "ram"|"RAM"|"memory"|"mem")
            if [[ -f "${functions_dir}/check_ram" ]]; then
                source "${functions_dir}/check_ram" && check_ram
            fi
            ;;
        "disk"|"storage"|"hdd"|"ssd")
            if [[ -f "${functions_dir}/check_disk" ]]; then
                source "${functions_dir}/check_disk" && check_disk
            fi
            ;;
        "gpu"|"GPU"|"graphics")
            if [[ -f "${functions_dir}/check_gpu" ]]; then
                source "${functions_dir}/check_gpu" && check_gpu
            fi
            ;;
        "all"|""|*)
            check_system
            ;;
    esac
}

# í•¨ìˆ˜ ì‹¤í–‰ (ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§ì ‘ ì‹¤í–‰ë  ë•Œ)
if [[ "${BASH_SOURCE[0]}" == "${0}" ]] || [[ "${(%):-%x}" == "${0}" ]]; then
    sysinfo "$@"
fi
